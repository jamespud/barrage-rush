# 推送服务器高级配置

# 服务器配置
spring.application.name=barrage-rush-push-server
server.tomcat.max-threads=200
server.tomcat.max-connections=8192
server.tomcat.accept-count=100

# WebSocket配置
spring.websocket.max-session-idle-timeout=600000
spring.websocket.max-text-message-buffer-size=8192
spring.websocket.max-binary-message-buffer-size=8192

# RabbitMQ高级配置
spring.rabbitmq.listener.simple.concurrency=5
spring.rabbitmq.listener.simple.max-concurrency=10
spring.rabbitmq.listener.simple.prefetch=50
spring.rabbitmq.listener.simple.transaction-size=10
spring.rabbitmq.listener.simple.retry.enabled=true
spring.rabbitmq.listener.simple.retry.initial-interval=1000
spring.rabbitmq.listener.simple.retry.max-attempts=3
spring.rabbitmq.listener.simple.retry.multiplier=1.5

# Redis连接池配置
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1

# 弹幕系统配置
barrage.mq.danmaku-exchange=danmaku.exchange
barrage.mq.danmaku-queue=danmaku.queue
barrage.mq.danmaku-routing-key=danmaku.routing
barrage.mq.notification-exchange=notification.exchange
barrage.mq.notification-queue=notification.queue
barrage.mq.notification-routing-key=notification.routing

# 日志配置
logging.level.com.spud.barrage=INFO
logging.level.org.springframework.web.socket=INFO
logging.level.org.springframework.amqp=INFO

# 健康检查配置
management.endpoint.health.show-details=always
management.endpoints.web.exposure.include=health,info,metrics,prometheus 